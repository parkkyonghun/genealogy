{
  "$schema": "https://railway.app/railway.schema.json",
  "build": {
    "commands": [
      "composer install --no-dev --optimize-autoloader",
      "npm ci --only=production",
      "npm run build",
      "php artisan config:cache",
      "php artisan route:cache",
      "php artisan view:cache"
    ]
  },
  "deploy": {
    "startCommand": "vendor/bin/heroku-php-apache2 public/",
    "postDeployCommand": "php artisan migrate --force"
  },
  "$env": {
    "APP_NAME": "Genealogy System",
    "APP_ENV": "production",
    "APP_KEY": "base64:your-generated-key-here",
    "APP_DEBUG": "false",
    "APP_URL": "https://${RAILWAY_STATIC_URL}",
    "LOG_CHANNEL": "stack",
    "LOG_DEPRECATIONS_CHANNEL": "null",
    "LOG_LEVEL": "error",
    "DB_CONNECTION": "pgsql",
    "DB_HOST": "",
    "DB_PORT": "5432",
    "DB_DATABASE": "",
    "DB_USERNAME": "",
    "DB_PASSWORD": "",
    "DATABASE_URL": "{{PostgreSQL.DATABASE_URL}}",
    "BROADCAST_CONNECTION": "log",
    "CACHE_DRIVER": "file",
    "FILESYSTEM_DISK": "public",
    "QUEUE_CONNECTION": "database",
    "SESSION_DRIVER": "database",
    "SESSION_LIFETIME": "120"
  }
}